<div id="stats-container" class="container">

  <div class="section">
    <ul class="select-period">
      <li><button class="btn btn-link" ng-class="{active: conversionPeriod === 'week'}" ng-click="conversionPeriod = 'week'">Jour</button></li>
      <li><button class="btn btn-link" ng-class="{active: conversionPeriod === 'month'}" ng-click="conversionPeriod = 'month'">Mois</button></li>
      <li><button class="btn btn-link" ng-class="{active: conversionPeriod === 'year'}" ng-click="conversionPeriod = 'year'">Année</button></li>
      <li><button class="btn btn-link" ng-class="{active: conversionPeriod === 'beginning'}" ng-click="conversionPeriod = 'beginning'">N/A</button></li>
    </ul>

    <div class="row">
      <div class="col-sm-3">
        <h1>Demandes en cours</h1>
        <hr>
        <div class="bigup" ng-if="timeLoading"><i class="fa fa-spin fa-spinner"></i></div>
        <div class="bigup" ng-if="!timeLoading">{{createdRequestCount}}</div>
      </div>
      <div class="col-sm-3">
        <h1>Demandes émises</h1>
        <hr>
        <div class="bigup" ng-if="timeLoading"><i class="fa fa-spin fa-spinner"></i></div>
        <div class="bigup" ng-if="!timeLoading">{{submittedRequestCount}}</div>
      </div>
      <div class="col-sm-3">
        <h1>Taux de conversion</h1>
        <hr>
        <div class="bigup" ng-if="timeLoading"><i class="fa fa-spin fa-spinner"></i></div>
        <div class="bigup" ng-if="!timeLoading">{{conversion() | number : 2}} %</div>
      </div>
      <div class="col-sm-3">
        <h1>Temps médian</h1>
        <hr>
        <div class="bigup" ng-if="timeLoading"><i class="fa fa-spin fa-spinner"></i></div>
        <div class="bigup" ng-if="!timeLoading">{{ median }}</div>
      </div>
    </div>
  </div>

  <div class="section">
    <div class="row">
      <div class="col-sm-4">
        <h1>Utilisateurs non confirmés</h1>
        <hr>
        <div class="bigup">{{unconfirmed}}</div>
      </div>
      <div class="col-sm-4">
        <h1>Total utilisateurs</h1>
        <hr>
        <div class="bigup">{{usersTotal}}</div>
      </div>
      <div class="col-sm-4">
        <h1>Ratio utilisateurs non confirmés</h1>
        <hr>
        <div class="bigup">{{usersRatio | number : 2}} %</div>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col-sm-12">
      <div class="section">
        <ul class="select-period">
          <li><button class="btn btn-link" ng-class="{active: requestAnalysisPeriod === 'week'}" ng-click="requestAnalysisPeriod = 'week'">Jour</button></li>
          <li><button class="btn btn-link" ng-class="{active: requestAnalysisPeriod === 'month'}" ng-click="requestAnalysisPeriod = 'month'">Mois</button></li>
          <li><button class="btn btn-link" ng-class="{active: requestAnalysisPeriod === 'year'}" ng-click="requestAnalysisPeriod = 'year'">Année</button></li>
          <li><button class="btn btn-link" ng-class="{active: requestAnalysisPeriod === 'beginning'}" ng-click="requestAnalysisPeriod = 'beginning'">N/A</button></li>
        </ul>

        <h1>Analyse des demandes</h1>
        <hr>
        <canvas id="line" class="chart chart-line"
          chart-data="requestAnalysisData"
          chart-labels="requestAnalysisLabels"
          chart-series="requestAnalysisSeries"
          chart-legend="true"></canvas>
      </div>
    </div>
    <div class="col-sm-12">
      <div class="section">
        <ul class="select-period">
          <li><button class="btn btn-link" ng-class="{active: requestCountHistoryPeriod === 'week'}" ng-click="requestCountHistoryPeriod = 'week'">Jour</button></li>
          <li><button class="btn btn-link" ng-class="{active: requestCountHistoryPeriod === 'month'}" ng-click="requestCountHistoryPeriod = 'month'">Mois</button></li>
          <li><button class="btn btn-link" ng-class="{active: requestCountHistoryPeriod === 'year'}" ng-click="requestCountHistoryPeriod = 'year'">Année</button></li>
          <li><button class="btn btn-link" ng-class="{active: requestCountHistoryPeriod === 'beginning'}" ng-click="requestCountHistoryPeriod = 'beginning'">N/A</button></li>
        </ul>

        <h1>Nombre de demandes (12 mois)</h1>
        <hr>
        <canvas id="line" class="chart chart-line"
          chart-data="requestCountHistoryData"
          chart-labels="requestCountHistoryLabels"
          chart-series="requestCountHistorySeries"
          chart-legend="true"></canvas>
      </div>
    </div>
    <div class="col-sm-12">
      <div class="section">
        <ul class="select-period">
          <li><button class="btn btn-link" ng-class="{active: requestRawDataPeriod === 'week'}" ng-click="requestRawDataPeriod = 'week'">Jour</button></li>
          <li><button class="btn btn-link" ng-class="{active: requestRawDataPeriod === 'month'}" ng-click="requestRawDataPeriod = 'month'">Mois</button></li>
          <li><button class="btn btn-link" ng-class="{active: requestRawDataPeriod === 'year'}" ng-click="requestRawDataPeriod = 'year'">Année</button></li>
          <li><button class="btn btn-link" ng-class="{active: requestRawDataPeriod === 'beginning'}" ng-click="requestRawDataPeriod = 'beginning'">N/A</button></li>
        </ul>

        <ul class="select-period">
          <li><button class="btn btn-link" ng-class="{active: requestRawDataFilter === '50'}" ng-click="requestRawDataFilter = '50'">50%</button></li>
          <li><button class="btn btn-link" ng-class="{active: requestRawDataFilter === '60'}" ng-click="requestRawDataFilter = '60'">60%</button></li>
          <li><button class="btn btn-link" ng-class="{active: requestRawDataFilter === '70'}" ng-click="requestRawDataFilter = '70'">70%</button></li>
          <li><button class="btn btn-link" ng-class="{active: requestRawDataFilter === '80'}" ng-click="requestRawDataFilter = '80'">80%</button></li>
          <li><button class="btn btn-link" ng-class="{active: requestRawDataFilter === '90'}" ng-click="requestRawDataFilter = '90'">90%</button></li>
          <li><button class="btn btn-link" ng-class="{active: requestRawDataFilter === '100'}" ng-click="requestRawDataFilter = '100'">100%</button></li>
        </ul>

        <h1>Temps total des demandes</h1>
        <hr>
        <canvas id="line" class="chart chart-bubble"
          chart-options="disableAnimationOptions"
          chart-data="requestRawData"></canvas>
      </div>
    </div>
    <div class="col-sm-12">
      <div class="section">
        <h1>Nombre de like par MDPH</h1>
        <hr>
         <canvas id="likesBar" class="chart chart-bar" chart-data="likesData" chart-labels="likesLabels" chart-series="likesSeries" chart-legend="true"></canvas>
      </div>
    </div>
    <div class="col-sm-4">
      <div class="section">
        <ul class="select-period">
          <li><button class="btn btn-link" ng-class="{active: requestCountByMdphPeriod === 'week'}" ng-click="requestCountByMdphPeriod = 'week'">Jour</button></li>
          <li><button class="btn btn-link" ng-class="{active: requestCountByMdphPeriod === 'month'}" ng-click="requestCountByMdphPeriod = 'month'">Mois</button></li>
          <li><button class="btn btn-link" ng-class="{active: requestCountByMdphPeriod === 'year'}" ng-click="requestCountByMdphPeriod = 'year'">Année</button></li>
          <li><button class="btn btn-link" ng-class="{active: requestCountByMdphPeriod === 'beginning'}" ng-click="requestCountByMdphPeriod = 'beginning'">N/A</button></li>
        </ul>

        <h1>Demandes émises par MDPH</h1>
        <hr>
        <canvas id="pie" class="chart chart-pie" chart-data="requestByMdphPieData" chart-labels="mdphLabels" chart-legend="true"></canvas>
      </div>
    </div>

    <div class="col-sm-4">
      <div class="section">
        <h1>Nombre de MDPH actives</h1>
        <hr>
        <div class="bigup">{{ enabledMdph }}</div>
      </div>
    </div>
  </div>
</div>
